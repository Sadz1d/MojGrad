<div class="volunteer-actions-page">

  <!-- HEADER -->
  <!-- HERO HEADER -->
  <div class="hero-section">

    <img src="assets/images/logo1.png" class="hero-logo" alt="Moj Grad logo" />

    <span class="title-badge">VOLONTIRANJE</span>

    <h2 class="section-title">Volonterske akcije</h2>

    <p class="section-subtitle">
      Prijavite se i pomozite svojoj zajednici kroz aktivne volonterske akcije.
    </p>

  </div>


  <!-- LOADING -->
  <div *ngIf="loading" class="loading">
    UÄitavanje volonterskih akcija...
  </div>

  <!-- ERROR -->
  <div *ngIf="errorMessage" class="error">
    {{ errorMessage }}
  </div>

  <!-- FILTERI -->
  <div class="filters-bar">

    <!-- SEARCH -->
    <input
      type="text"
      placeholder="PretraÅ¾i akcije..."
      [(ngModel)]="searchTerm"
      (ngModelChange)="applyFilters()"
      class="search-input"
    />
    <input
      type="text"
      placeholder="Lokacija"
      [(ngModel)]="filterLocation"
      (ngModelChange)="applyFilters()" />


    <input type="date" [(ngModel)]="dateFrom" (change)="applyFilters()" />
    <input type="date" [(ngModel)]="dateTo" (change)="applyFilters()" />

    <!-- SAMO DOSTUPNE -->
    <label class="checkbox">
      <input
        type="checkbox"
        [(ngModel)]="showOnlyAvailable"
        (change)="applyFilters()"
      />
      Samo dostupne akcije
    </label>

    <!-- SORT -->
    <button
      mat-stroked-button
      (click)="sortByDateAsc = !sortByDateAsc; applyFilters()"
    >
      Sortiraj po datumu {{ sortByDateAsc ? 'â¬†ï¸' : 'â¬‡ï¸' }}
    </button>




  </div>

  <!-- LISTA AKCIJA -->
  <div class="actions-grid" *ngIf="!loading && filteredActions.length">

    <div class="action-card" *ngFor="let action of filteredActions">

      <!-- HEADER -->
      <div class="action-header">

        <h3>{{ action.name }}</h3>
        <span class="date">
          ğŸ“… {{ action.eventDate | date:'dd.MM.yyyy' }}
        </span>
        <span class="status available" *ngIf="action.freeSlots > 0">AKTIVNA</span>
        <span class="status full" *ngIf="action.freeSlots === 0">POPUNJENA</span>

      </div>

      <!-- BODY -->
      <p class="description">
        {{ action.description }}
      </p>

      <div class="meta">
        <span>ğŸ“ {{ action.location }}</span>
        <span>ğŸ‘¥ {{ action.participantsCount }} / {{ action.maxParticipants }}</span>
      </div>

      <!-- FOOTER -->
      <div class="action-footer">
  <span class="slots" [class.full]="action.freeSlots === 0">
    Slobodna mjesta: {{ action.freeSlots }}
  </span>

        <!-- USER BUTTON -->
        <button
          mat-raised-button
          color="primary"
          (click)="joinAction(action)"
          [disabled]="
      action.freeSlots === 0 ||
      joiningActionId === action.id ||
      action.isUserJoined
    "
        >
          <span *ngIf="action.isUserJoined">âœ”ï¸ Prijavljeni ste</span>
          <span *ngIf="!action.isUserJoined && joiningActionId !== action.id">
      Prijavi se
    </span>
          <span *ngIf="joiningActionId === action.id">
      â³ Prijava...
    </span>
        </button>
      </div>

      <!-- âœ… ADMIN ACTIONS â€“ IDE ODMAH ISPOD FOOTERA -->
      <div *ngIf="isAdmin" class="admin-actions">
        <button
          mat-stroked-button
          color="primary"
          (click)="editAction(action)"
        >
          âœï¸ Uredi
        </button>

        <button
          mat-stroked-button
          color="warn"
          (click)="deleteAction(action.id)"
        >
          ğŸ—‘ ObriÅ¡i
        </button>
      </div>

    </div>

  <!-- PRAZNO STANJE -->
  <div *ngIf="!loading && !filteredActions.length" class="empty">
    Trenutno nema dostupnih volonterskih akcija.
  </div>

  <button class="back-home" (click)="goHome()">
    ğŸ  PoÄetna
  </button>

</div>






</div>
